!(import! &self motto)
!(import! &self agents)
!(import! &self agents:events)
!(bind! &events (basic-event-bus))

!(bind! &a1 (listening-agent "examples/examples_with_threads/simple_call.msa"  &events))
!(&a1 .start)
!(publish-event &events "speech" (py-dict (("data" "who is the 6 president of France"))))
;! (&a1 .set_event "speech" (py-dict (("text" "who is the 6 president of France"))))
! ((py-atom time.sleep) 5)
! (&a1 .say)
;! (&a1 .set_event "speech" (py-dict (("text" "who is John Legend? tell me many sentences"))))
;! ((py-atom time.sleep) 0.7)
;! (&a1 .say)
;! (&a1 .set_event "speechstart")
;! ((py-atom time.sleep) 0.6)
;! (&a1 .set_event "speechcont")
;! ((py-atom time.sleep) 3)
;! (&a1 .say)
;! (&a1 .set_event "speech" (py-dict (("text" "so who is John Lennon?"))))
;! (&a1 .set_event "speechstart")
;! ((py-atom time.sleep) 3)
;! (&a1 .say)
;! (&a1 .set_event "speech" (py-dict (("text" "Which songs did he write?"))))
;! ((py-atom time.sleep) 10)
;! (&a1 .say)
! (&a1 .stop)